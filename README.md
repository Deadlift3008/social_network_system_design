# social_network_system_design
https://balun.courses/courses/system_design

<h1>Социальная сеть для путешественников ✈️</h1>

<h3>Функциональные требования:</h3>

- Публикация постов 
- Поддержка прикрепления изображений 
- Поддержка привязки конкретного места к посту (название + адрес) 
- Комментарии под постами 
- Оценки постов 
- Подписки на путешественников
- Просмотр ленты путешественников
- Просмотр страницы места для путешествия
- Поиск мест по названию, адресу с ранжированием по популярности
- Поиск постов по названию, адресу привязанного места

<h3>Нефункциональные требования:</h3>

- Кроссплатформенность: браузер, мобильное приложение
- 10 000 000 DAU
- Поведение:  
   В среднем каждый пользователь:
     - 2 раза в год делает пост, 1 из них с картинкой, оба раза с прикрепленным местом
     - раз в 2 недели оставляет комментарий
     - раз в неделю ставит оценку
     - 2 раза в неделю просматривает ленту с 3мя запросами на подгрузку. По 10 постов за каждую подгрузку
     - раз в месяц делает поиск мест
     - раз в 3 недели делает поиск постов
     - 2 раза в неделю просматривает 5 страниц мест
- Ограничение в 1 000 000 подписок  
- Регионы использования: только СНГ  
- Нет сезонности  
- Ограничение на пост 30КБ без картинок
- Ограничение на изображение для поста 2 мб
- Доступность 99,95%

<h3>Нагрузка и трафик на 1 год:</h3>

- Создание поста 1 RPS, 1 * 15 = 15КБ/С 
  1 год: 15КБ * 86400 * 365 = 473040000КБ ~ 473 ГБ 
- Загрузка картинок 0.5 RPS(если будем делать сами хранение), 1000КБ средняя картинка * 0.5 RPS = 500КБ/С
  1 год: 500КБ * 86400 * 365 ~ 16 ТБ 
- Отправка комментария 8 RPS, 2КБ коммент * 8 RPS = 16КБ/С
  1 год: 16КБ * 86400 * 365 ~ 505 ГБ
- Оставление оценки 16 RPS, 0.001КБ оценка * 16 RPS ~ 0.01КБ/С
  1 год: 0.01КБ * 86400 * 365 ~ 315 МБ
- Просмотр ленты 96 RPS, 10 постов * 15КБ пост * 96RPS ~ 14МБ/С
  1 год: 14МБ * 86400 * 365 ~ 441 ТБ
- Просмотр картинок из постов в ленте 48 RPS, 1000КБ * 48 = 48МБ/С
  1 год: 48МБ * 86400 * 365 ~ 1.5 ПБ
- Поиск мест 4 RPS, место 15КБ * 4RPS = 60КБ/С
  1 год: 60КБ * 86400 * 365 ~ 1.9 ТБ
- Поиск постов 6 RPS, 15КБ пост * 10 результатов в выдаче * 6 RPS = 900 КБ/С
  1 год: 900КБ * 86400 * 365 ~ 28 ТБ
- Просмотр страницы места 165 RPS, 15 КБ место * 165 RPS ~ 2.5МБ/С
  1 год: 2.5МБ * 86400 * 365 ~ 79 ТБ

<p><span style='text-decoration: underline; text-underline-offset: 0.3em'>Одновременные соединения</span> - 10 000 000 DAU * 0.1 = <span style='color: #03fc1c'>1 000 000</span></p>

<h3>Рассчет хранилища на 1 год:</h3>

- Хранилище текстовой информации:
    473 ГБ + 505 ГБ + 315 МБ + 441 ТБ + 1.9 ТБ + 28 ТБ + 79 ТБ ~ 550 ТБ

    Capacity ~ 18 МБ/С

    IOPS ~ 300 

    Объем не очень большой, операций тоже не очень много, но больше чем у подсистемы картинок.
    24 SSD SATA по 25 ТБ 

- Хранилище для картинок:
    16 ТБ + 1.5 ПБ ~ 1.516 ПБ

    Capacity ~ 50 МБ/С
    
    IOPS ~ 49

    Возьмем SSD (SATA) так как объем довольно большой, а операции не очень частые
    16 SSD (SATA) по 100 ТБ
